---
thread: "Crear cache de p&aacute;ginas .php"
id_msg: 908459
date: "2019-07-01 20:02:33"

subject: "Crear cache de p&aacute;ginas .php"
user: "yap320sorgesoureDug"

modified_time: 2019-07-01 20:07:45
modified_name: "yap320sorgesoureDug"
icon: xx



edit_reason: "pos no'más y así :'v"
---
<div align="center"><span style="font-size: 18pt;" class="bbc_size"><span style="color: brown;" class="bbc_color"><strong><span class="bbc_u">Sobre crear cache de páginas .php</span></strong></span></span></div><br /><br />Código extraido del curso de desarrollo web completo de udemy:<br /><a href="https://www.udemy.com/course/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/" class="bbc_link new_win" target="_blank">https://www.udemy.com/course/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/</a><br /><br />Clase 492.<br />Cachear PHP y Consultas MySQL<br /><a href="https://www.udemy.com/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/learn/lecture/9444758" class="bbc_link new_win" target="_blank">https://www.udemy.com/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/learn/lecture/9444758</a><br /><br /><div align="center"><span style="color: navy;" class="bbc_color"><span style="font-size: 12pt;" class="bbc_size"><strong>Código para el header:</strong></span></span></div><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code"><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Definir&nbsp;un&nbsp;nombre&nbsp;para&nbsp;cachear<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$archivo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">&#039;PHP_SELF&#039;</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pagina&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">".php"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$archivo</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Definir&nbsp;archivo&nbsp;para&nbsp;cachear&nbsp;(puede&nbsp;ser&nbsp;.php&nbsp;también)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$archivoCache&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">&#039;cache/&#039;</span><span style="color: #007700">.</span><span style="color: #0000BB">$pagina</span><span style="color: #007700">.</span><span style="color: #DD0000">&#039;.php&#039;</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Cuanto&nbsp;tiempo&nbsp;deberá&nbsp;estar&nbsp;este&nbsp;archivo&nbsp;almacenado<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tiempo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">36000&nbsp;</span><span style="color: #FF8000">//&nbsp;10&nbsp;horas<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Chequear&nbsp;que&nbsp;el&nbsp;archivo&nbsp;exista,&nbsp;el&nbsp;tiempo&nbsp;sea&nbsp;el&nbsp;adecuado&nbsp;y&nbsp;muestralo<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$archivoCache</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">$tiempo&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">filemtime</span><span style="color: #007700">(</span><span style="color: #0000BB">$archivoCache</span><span style="color: #007700">))&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;include(</span><span style="color: #0000BB">$archivoCache</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;exit;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Si&nbsp;el&nbsp;archivo&nbsp;no&nbsp;existe,&nbsp;o&nbsp;el&nbsp;tiempo&nbsp;de&nbsp;cacheo&nbsp;ya&nbsp;se&nbsp;venció&nbsp;genera&nbsp;uno&nbsp;nuevo<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span></span></code><br /><br />No poner un tiempo de cache demasiado grande si la página requiere actualizarse seguido.<br />10 horas estaría bien si es de esas páginas que registra muy pocos cambios al día.<br /><br /><br /><div align="center"><span style="color: purple;" class="bbc_color"><span style="font-size: 12pt;" class="bbc_size"><strong>Código para el footer:</strong></span></span></div><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code"><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Guarda&nbsp;todo&nbsp;el&nbsp;contenido&nbsp;a&nbsp;un&nbsp;archivo<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$archivoCache</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">&#039;w&#039;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ob_get_contents</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Enviar&nbsp;al&nbsp;navegador<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ob_end_flush</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span></span></code><br /><br />Ver más aquí:<br /><a href="https://www.udemy.com/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/learn/lecture/9444758" class="bbc_link new_win" target="_blank">https://www.udemy.com/desarrollo-web-completo-con-html5-css3-js-php-y-mysql/learn/lecture/9444758</a>
