---
thread: "[SA][2DFX] Creating your own particle effects"
id_msg: 908249
date: "2018-11-25 23:40:22"

subject: "[SA][2DFX] Creating your own particle effects"
user: "Mumifag Lalolanda"



icon: xx




---
Original source: <a href="https://gtaforums.com/topic/304880-sa2dfx-creating-your-own-particle-effects/" class="bbc_link new_win" target="_blank">https://gtaforums.com/topic/304880-sa2dfx-creating-your-own-particle-effects/</a><br /><br /><br /><br />Hello there... as I said, here is the tut for creating new particle effects, I will explain also the structure of them (or well, the parameters)<br /><br />You need to know how to export 2dfx with &#65279;DexX script&#65279;, I wont explain it here...<br /><br /><br />So first, open your <strong>effects.fxp</strong> file that is in <strong>models</strong> folder. that file can be opened with notepad and such, lets copy one of the existing files, I used PRT_sand.<br /><br />Copy from the start to the end, It usually starts on:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FILENAME: &#65279;X:\SA\FxTools\Data\effects\gta_pc\particles/prt_sand.fxs<br />NAME: prt_sand</code><br />and end with:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">LODSTART: 30.000<br />LODEND: 50.000<br />OMITTEXTURES: 0<br />TXDNAME: NOTXDSET<br /><br />FX_SYSTEM_DATA:<br />109</code><br />Paste it where you want, just be sure it doesnt &#039;cut&#039; any other &#65279;particle system, then rename it to your one:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FILENAME: X:\SA\FxTools\Data\effects\gta_pc\particles/prt_JV.fxs<br />NAME: prt_JV</code><br /><span style="color: red;" class="bbc_color">Notice:</span> The filename is ignored, its a path on R*s network disk but can help for identifying the particle system.<br /><br />Now you have your particle system created, nice. lets spawn it then edit.<br /><br />Go to your 3d max script folder, and find the SAparticle.ini: open it with notepad or any of those and search for:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">numparticlesys=82</code><br />Thats the number of particle systems in the game, so just change it to 83<br /><br />Search again for [particlesystems], you will see a list of particle effects, go to the end and add your one:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">psys83=prt_JV</code><br />Done. sav&#65279;e the ini and launch 3d Studio Max, now you will see your effect in the particle rollout <img src="https://media.gtanet.com/gtaforums/images/html/emoticons/Shifty41s_beerhatsmilie2.gif" alt="" class="bbc_img" /> you should go test it so you&#039;re sure it worked.&#65279;<br />&#65279;<br />I will explain now the structure of the particle system...&#65279;.&#65279;<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FILENAME: X:\SA\FxTools\Data\effects\gta_pc\particles/prt_JV.fxs<br />NAME: prt_JV<br />LENGTH: 5.000<br />LOOPINTERVALMIN: 0.000<br />LENGTH: 5.000<br />PLAYMODE: 2<br />CULLDIST: 50.000<br />BOUNDINGSPHERE: 0.0 0.0 0.0 0.0<br />NUM_PRIMS: 1<br />FX_PRIM_EMITTER_DATA:</code><br />filename and name explained before. Those lenghts parameters and loop I dont know what are... I tried changing playmode without any effect and same with culldist. NUM_PRIMS looks like the number of particle effects in each system (you can have more than one, like over explosions you have the fire and the dark smoke)<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_PRIM_BASE_DATA:<br />NAME: ParticleEmitter<br />MATRIX: 1.000 0.000 0.000 0.000 1.000 0.000 0.00&#65279;0 0.000 1.000 0.000 0.000 0.000<br />TEXTURE: fireball<br />TEXTURE2: NULL<br />TEXTURE3: NULL<br />TEXTURE&#65279;4: NULL<br />ALPHAON: 1<br />SRCBLENDID: 4<br />DSTBLENDID: 5</code><br />I dont know what is the matrix for, not the position/rotation.<br />DexX explained to me sometime ago something about the textures.. I dont remember dontgetit.gif well, its just texture used, they are in effectsPC.txd in your models folder, dont know if it can load from other TXDs<br />The alphaon parameter is easy: if 1, alpha loaded, if 0: no alpha<br /><img src="http://i144.photobucket.com/albums/r161/JostVice/noalphalol.jpg" alt="" class="bbc_img" /><br /><br />the two &#039;blendid&#039; parameters looks like D3d blend types:<br /><a href="http://msdn2.microsoft.com/en-us/library/bb172508(VS.85).aspx" class="bbc_link new_win" target="_blank">http://msdn2.microsoft.com/en-us/library/bb172508(VS.85).aspx</a><br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">NU&#65279;M_INFOS: 6<br />FX_INFO_EMLIFE_DATA:<br />LIFE:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME:&#65279; 0.000<br />VAL: 9.000<br />BIAS:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 5.000</code><br />Thats the &#039;life&#039; of the particle (time i&#65279;n ms for the particle to be killed (usually it fades))<br />For example this effect are 9000 ms, I dont know what is the bias for.<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_INFO_EMROTATION_DATA:<br />ANGLEMIN:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.000<br />ANGLEMAX:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 360.000</code><br />Thats the rotation of the texture (in degress)<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_INFO_FORCE_DATA:<br />TIMEMODEPRT: 1<br />FORCEX:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.050<br />FORCEY:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.000<br />FORCEZ:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.150</code><br />The force is the direction of the particle. You can check h&#65279;ere that a X force of 0.050 and a Z force of 0.150 make this: <img src="http://i144.photobucket.com/albums/r161/JostVice/wowa.jpg" alt="" class="bbc_img" /><br /><br />You can also change the &#039;force&#039; via time. Just increase the num_keys<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_INFO_ROTSPEED_DATA:<br />TIMEM&#65279;ODEPRT: 1<br />MINCW:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_&#65279;DATA:<br />TIME: 0.000<br />VAL: 50.000<br />MAXCW:<br />FX_I&#65279;NTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DAT&#65279;A:<br />TIME: 0.000<br />VAL: 100.000<br />MINCCW:<br />FX_INTERP_DATA:<br />&#65279;LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 50.000<br />MAXCCW:<br />FX_&#65279;INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 1<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 100.000</code><br />Thats the rotation speed, I didnt test with it yet.<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_INFO_COLOUR_DATA:<br />TIMEMODE&#65279;PRT: 1<br />RED:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 4<br />FX_KEYFLO&#65279;AT_DATA:<br />TIME: 0.000<br />VAL: 255.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.100<br />VA&#65279;L: 255.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.600<br />VAL: 255.000<br />FX_KEYFLOAT_D&#65279;ATA:<br />TIME: 0.900<br />VAL: 0.000<br />GREEN:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 4<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 255.000<br />FX_KEYF&#65279;LOAT_DATA:<br />TIME: 0.100<br />VAL: 215.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.600<br />VAL: 210.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.900<br />VAL: 0.0&#65279;00<br />BLUE:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 4<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 255.000<br />FX_KEYFLOAT_DATA:<br />T&#65279;IME: 0.100<br />VAL: 84.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.600<br />VAL: 0.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.900<br />VAL: 0.000<br />ALPH&#65279;A:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 4<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.&#65279;100<br />VAL: 255.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.600<br />VAL: 0.000<br />FX_KEYFLOAT_DATA:<br />TIME: 0.900<br />VAL: 0.000</code><br />Thats the code (in RGB) and alpha. Check that they are on &#039;frames&#039; as in time 0.000 there is an value and in 0.600 another one.<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">FX_IN&#65279;FO_SIZE_DATA:<br />TIMEMOD&#65279;EPRT: 1<br />SIZEX:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 2<br />FX_KEYFLOAT_DA&#65279;TA:<br />TIME: 0.00&#65279;0<br />VAL: 0.500<br />FX_KEYFLOAT_DATA:<br />TIME: 1.000<br />VAL: 3.00&#65279;0<br />SIZEY:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 2<br />FX_KEYFLOAT_DATA:<br />TIME: 0.000<br />VAL: 0.500<br />FX_KEYFLOAT_D&#65279;ATA:<br />TIME: 1.000<br />VAL: 3.000<br />SIZEXBIAS:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 2<br />FX_KEYFLOAT_DATA:<br />TIME&#65279;: 0.000<br />VAL: 0.500<br />FX_KEYFLOAT_DATA:<br />TIME: 1.000<br />VAL: 1.500<br />SIZEYBIAS:<br />FX_INTERP_DATA:<br />LOOPED: 0<br />NUM_KEYS: 2<br />FX_KEYFLOAT&#65279;_DATA:<br />TIME: 0.000<br />VAL: 1.000<br />FX_KEYFLOAT_DATA:<br />TIME: 1.000<br />VAL: 1.500</code><br />The size of particle effect, you can also change the value via the time like in color and force so you have that at the start its pretty small &#65279;and then get bigger.<br /><br />Well, i&#039;m done. I hope I did&#65279;nt miss something and that all was clear, anyway if need help or you foind that i&#039;m wrong on something i will like to know <img src="/assets/smf/smileys/tongue.gif" alt="&#58;tongue&#58;" title="tongue" class="smiley" /> <img src="/assets/smf/smileys/792280.gif" alt="&#58;razz&#58;" title="Razz" class="smiley" />
