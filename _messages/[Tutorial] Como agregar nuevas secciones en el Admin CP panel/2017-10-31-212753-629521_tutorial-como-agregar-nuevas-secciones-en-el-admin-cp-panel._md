---
thread: "[Tutorial] &iquest;C&oacute;mo agregar nuevas secciones en el Admin CP panel?"
id_msg: 629521
date: "2017-10-31 21:27:53"

subject: "[Tutorial] &iquest;C&oacute;mo agregar nuevas secciones en el Admin CP panel?"
user: "t0dragonquesa"

modified_time: 2017-10-31 23:42:40
modified_name: "yap320sorgesoureDug"
icon: lamp



edit_reason: "pos no'más y así :'v"
---
<div align="center"><span style="font-size: 24pt;" class="bbc_size"><strong><span style="color: pink;" class="bbc_color">&#9728; </span><span style="color: teal;" class="bbc_color">[<span style="color: navy;" class="bbc_color">Tutorial</span>]</span></strong></span><br /><span style="font-size: 24pt;" class="bbc_size"><span style="font-family: impact;" class="bbc_font"><span style="color: purple;" class="bbc_color"><strong>¿Cómo agregar nuevas secciones en el <span style="color: brown;" class="bbc_color">Panel de Administración</span>?</strong></span></span></span></div><br /><br />El presente tutorial no está completo, pero os ayudará a entender mejor los archivos y la estructura de SMF, y por tanto, a averiguar cómo conseguir la info que falta. Para agregar una nueva sección en el Admin CP, seguid los siguientes pasos:<br /><br /><br /><br /><div align="center"><span style="font-size: 14pt;" class="bbc_size"><span style="color: pink;" class="bbc_color">&#9728;</span> Registrar el menu en <em>Sources/Admin.php</em></span></div><br />En el archivo <strong>Admin.php</strong> podrás encontrar la función <span style="font-family: courier;" class="bbc_font"><span style="color: gray;" class="bbc_color">AdminMain()</span></span>, que es donde están definidas todas las secciones que se pueden ver en el Admin CP a través de arrays, donde cada uno de sus elementos puede ser un nuevo array que alverga más arrays.<br /><br />Su nueva sección puede ser declarada de la siguiente forma:<br /><br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&#039;nueva_seccion&#039; =&gt; array($txt&#91;&#039;label_de_nueva_seccion&#039;]),</code><br />Este parámetro <span style="font-family: courier;" class="bbc_font"><span style="color: gray;" class="bbc_color">$txt&#91;&#039;label_de_nueva_seccion&#039;]</span></span> puede ser definido en el archivo <em>Themes/default/languages/<strong>Modifications.english.php</strong></em>, así como en el resto de idiomas que haya disponibles.<br /><br /><br /><br /><div align="center"><span style="font-size: 14pt;" class="bbc_size"><span style="color: pink;" class="bbc_color">&#9728;</span> Definir el contenido de la sección en <em>./Sources/ManageSettings.php</em></span></div><br />En este archivo encontrarán varios métodos que les permitirá meterse dentro de las secciones definidas en el Admin CP, y de ese modo podrán definir nuevas. Algunos de estos métodos son:<br /><br /><span style="font-family: courier;" class="bbc_font"><span style="color: green;" class="bbc_color">&nbsp;&nbsp;&nbsp;void ModifyFeatureSettings()<br />&nbsp;&nbsp;&nbsp;void ModifySecuritySettings()<br />&nbsp;&nbsp;&nbsp;void ModifyModSettings()<br />&nbsp;&nbsp;&nbsp;void ModifyCoreFeatures()<br />&nbsp;&nbsp;&nbsp;void ModifyBasicSettings()<br />&nbsp;&nbsp;&nbsp;void ModifyGeneralSecuritySettings()<br />&nbsp;&nbsp;&nbsp;void ModifyLayoutSettings()<br />&nbsp;&nbsp;&nbsp;void ModifyKarmaSettings()<br />&nbsp;&nbsp;&nbsp;void ModifyModerationSettings()<br />&nbsp;&nbsp;&nbsp;void ModifySpamSettings()<br />&nbsp;&nbsp;&nbsp;void ModifySignatureSettings()<br />&nbsp;&nbsp;&nbsp;void pauseSignatureApplySettings()<br />&nbsp;&nbsp;&nbsp;void ShowCustomProfiles()<br />&nbsp;&nbsp;&nbsp;void EditCustomProfiles()<br />&nbsp;&nbsp;&nbsp;void ModifyPruningSettings()<br />&nbsp;&nbsp;&nbsp;void disablePostModeration()</span></span><br /><br />Para el ejemplo de este tutorial, trabajaremos con el método el método <span style="font-family: courier;" class="bbc_font">ModifyFeatureSettings()</span>, que es donde se define el contenido de las secciones tales como basic, layout, karma, sig, profile, y profileedit. Si deseáramos agregar una nueva sección aquí, buscamos la parte del código que diga lo siguiente:<br /><br /><div class="codeheader">Código: (buscar esta parte de código) <a href="#" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&nbsp;&nbsp;&nbsp;$subActions = array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;basic&#039; =&gt; &#039;ModifyBasicSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;layout&#039; =&gt; &#039;ModifyLayoutSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;karma&#039; =&gt; &#039;ModifyKarmaSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;sig&#039; =&gt; &#039;ModifySignatureSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;profile&#039; =&gt; &#039;ShowCustomProfiles&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;profileedit&#039; =&gt; &#039;EditCustomProfiles&#039;,<br />&nbsp;&nbsp;&nbsp;);</code><br />Y ahí añadimos nuestra nueva sección, para que aparezca en ese apartado, recordando que el orden en que se declaran será el orden en que se muestren:<br /><br /><span style="font-family: courier;" class="bbc_font">&nbsp;&nbsp;&nbsp;$subActions = array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;basic&#039; =&gt; &#039;ModifyBasicSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;layout&#039; =&gt; &#039;ModifyLayoutSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong><span class="bbc_u">&#039;nueva_seccion&#039; =&gt; &#039;MiNuevaSeccion&#039;,</span></strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;karma&#039; =&gt; &#039;ModifyKarmaSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;sig&#039; =&gt; &#039;ModifySignatureSettings&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;profile&#039; =&gt; &#039;ShowCustomProfiles&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;profileedit&#039; =&gt; &#039;EditCustomProfiles&#039;,<br />&nbsp;&nbsp;&nbsp;);</span><br /><br />Es importante que la llave del array que estás colocando aquí coincida con la que usaste en el archivo anterior. Del mismo modo, el valor del elemento que estás añadiendo (<span style="font-family: courier;" class="bbc_font">&#039;MiNuevaSeccion&#039;</span>) concidirá con la función que vamos a definir en este mismo archivo, que es donde definiremos el contenido de la sección.<br /><br /><strong>¿Dónde o en qué parte del código vamos a agregar la función</strong> <span style="font-family: courier;" class="bbc_font"><span style="color: teal;" class="bbc_color">function MiNuevaSeccion(){}</span></span><strong>?</strong><br /><br />Pues procuremos definirla en el mismo orden en que han sido definidas las funciones que se encuentran antes (o después) de ésta. En este caso &#039;<em>MiNuevaSeccion</em>&#039; está siendo declarada entre &#039;<em>ModifyLayoutSettings</em>&#039; y &#039;<em>ModifyKarmaSettings</em>&#039;, por lo que podemos definir la función entre <span style="font-family: courier;" class="bbc_font">function ModifyLayoutSettings()</span> y <span style="font-family: courier;" class="bbc_font">function ModifyKarmaSettings()</span>.<br /><br /><strong>¿Cómo construir la función en base al contenido que va a tener?</strong><br /><br />Este ejemplo debería daros una idea majos!<br /><br />La función que define el contenido:<br /><div style="margin:20px; margin-top:5px"><div class="smallfont" style="margin-bottom:2px"><b>Spoiler</b> for <i>Hidden</i>: <input type="button" value="Show" style="width:60px;font-size:10px;margin:0px;padding:0px;" onClick="if (this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display != '') { this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = ''; &nbsp; &nbsp; &nbsp; &nbsp;this.innerText = ''; this.value = 'Hide'; } else { this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = 'none'; this.innerText = ''; this.value = 'Show'; }"></div><div class="alt2" style="margin: 0px; padding: 6px; border: 1px inset;"><div style="display: none;"><span style="font-family: courier;" class="bbc_font"><span style="color: navy;" class="bbc_color">function ModifyMemberColorLinksSettings($return_config = false)<br />{<br />&nbsp;&nbsp;&nbsp;global $txt, $scripturl, $context, $settings, $sc;<br /><br />&nbsp;&nbsp;&nbsp;$config_vars = array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Standard Membercolor?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorLink&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorLinkOldSpanStyle&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Some Stat Settings<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorLatestMember&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorStats&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorWhoIsOnline&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Thread and Boardsettings<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorThreadOwner&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorThreadLastPost&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorThreadChild&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Birthday and Calendar <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorModeratorLinks&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorBoardindex&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorBirthday&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Some Recent Things<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorRecentOwner&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorRecentLastPost&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// PM Colors<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorInbox&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039;, &#039;MemberColorOutbox&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Moderation Things :)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039; , &#039;MemberColorModCenter&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039; , &#039;MemberColorIssuePList&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//The Heavy Member Search Option<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;check&#039; , &#039;MemberColorAllSearch&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Guest Color<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;text&#039;, &#039;MemberColorGuests&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Banned User Color<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;text&#039;, &#039;MemberColorBanned&#039;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Birthday User Color<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(&#039;text&#039;, &#039;MemberColorBirthdayColor&#039;),<br />&nbsp;&nbsp;&nbsp;);<br /><br />&nbsp;&nbsp;&nbsp;if ($return_config)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $config_vars;<br /><br />&nbsp;&nbsp;&nbsp;// Saving?<br />&nbsp;&nbsp;&nbsp;if (isset($_GET&#91;&#039;save&#039;]))<br />&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;saveDBSettings($config_vars);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirectexit(&#039;action=admin;area=featuresettings;sa=MemberColorLinks&#039;);<br />&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;$context&#91;&#039;post_url&#039;] = $scripturl . &#039;?action=admin;area=featuresettings;save;sa=MemberColorLinks&#039;;<br />&nbsp;&nbsp;&nbsp;$context&#91;&#039;settings_title&#039;] = $txt&#91;&#039;MemberColorLinkHeadline&#039;];<br /><br />&nbsp;&nbsp;&nbsp;prepareDBSettingContext($config_vars);<br />}</span></span></div></div></div><br />El contenido al final debería verse así:<br /><div style="margin:20px; margin-top:5px"><div class="smallfont" style="margin-bottom:2px"><b>Spoiler</b> for <i>Hidden</i>: <input type="button" value="Show" style="width:60px;font-size:10px;margin:0px;padding:0px;" onClick="if (this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display != '') { this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = ''; &nbsp; &nbsp; &nbsp; &nbsp;this.innerText = ''; this.value = 'Hide'; } else { this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = 'none'; this.innerText = ''; this.value = 'Show'; }"></div><div class="alt2" style="margin: 0px; padding: 6px; border: 1px inset;"><div style="display: none;"><img src="https://i.imgur.com/9UMJUTn.png" alt="" class="bbc_img" /></div></div></div><br />El elemento <span style="font-family: courier;" class="bbc_font">array(&#039;check&#039;, &#039;MemberColorLink&#039;)</span> agregará un checkbox, acompañado del texto dado por &#039;<em>MemberColorLink</em>&#039; (que ha sido definido con esa misma etiqueta en <strong>Modifications.english.php</strong>. El elemento <span style="font-family: courier;" class="bbc_font">&#039;&#039;,</span> agrega una separación. El elemento <span style="font-family: courier;" class="bbc_font">array(&#039;text&#039;, &#039;MemberColorGuests&#039;)</span> agrega un campo de texto aparentemente.<br /><br />Os dejo de tarea qué otro tipo de elementos pueden ser insertados. <img src="/assets/smf/smileys/wink.gif" alt="&#58;wink&#58;" title="wink" class="smiley" /><br /><br /><span style="color: red;" class="bbc_color"><strong>Importante:</strong></span> nótese que &#039;<em>MemberColorLink</em>&#039; es una etiqueta definida en lenguajes, pero al mismo tiempo también es un elemento en el array <span style="font-family: courier;" class="bbc_font">$modSettings</span>. Los datos en este array no se almacenan en ninguna base de datos, pero sí en memoria caché de la página. Así que no os volváis locos queriendo guardar toneladas de info e aquí ¿eh?
