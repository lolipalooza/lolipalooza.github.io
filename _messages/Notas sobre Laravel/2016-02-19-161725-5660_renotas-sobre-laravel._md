---
thread: "Notas sobre Laravel"
id_msg: 5660
date: "2016-02-19 16:17:25"

subject: "Re:Notas sobre Laravel"
user: "yap320sorgesoureDug"

modified_time: 2016-03-03 13:35:24
modified_name: "yap320sorgesoureDug"
icon: xx



edit_reason: "pos nomas"
---
<strong><span style="font-size: 14pt;" class="bbc_size">Modelos - cómo crearlos y manejarlos - básico</span></strong><br /><br />Un modelo permite generar consultas más fácil y limpiamente, pero cuidado! el problema es que no sabes cuantas consultas se generan en las pocas instrucciones que uses, por lo que en los casos en los que necesitas optimizar las consultas generadas, es necesario trabajar directamente con SQL.<br /><br />Para crear un modelo, se puede hacer mediante la cónsola:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">php artisan make:model NombreDelModelo</code><br />Cada modelo se corresponde con una tabla.<br /><br />Con la instrucción <em>$result = NombreDelModelo::first()</em> puedes consultar el primer elemento (fila) en una tabla.<br />Puedes consultar los atributos del elemento encontrado en <em>$result</em> mediante <em>$result-&gt;atributo</em>.<br /><br />Si deseas crear atributos personalizados dentro del modelo, agrega el método dentro del modelo:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">public function getAsdfAttribute()<br />{<br />&nbsp; &nbsp; return &#039;valor&#039;;<br />}</code>Y luego puedes consultar dicho atributo con <em>$result-&gt;asdf</em> o con <em>$result-&gt;getAsdfAttribute()</em>.<br /><br /><strong>¿Cómo sabe laravel a qué tabla corresponde el modelo?</strong><br />Con la propiedad <em>protected $table = &#039;nombre_de_la_tabla&#039;;</em><br />Sin embargo, es posible omitir esta línea de código si se sigue una simple convención:<br />Si el nombre de la tabla es &quot;users&quot;, el nombre del modelo debe ser <em>User</em>. Si el nombre de la tabla es &quot;user_profiles&quot;, el nombre del modelo debe ser <em>UserProfile</em>. Si el nombre de la tabla es &quot;tasks&quot;, el nombre del modelo debe ser <em>Task</em>. ¿Capistch? El nombre de la tabla finaliza con una palabra en plural (es mejor trabajar en idioma inglés), y en caso de tener mas de una palabra, éstas van en minúscula y se separan con &quot;underscore&quot; o &quot;_&quot;, y el nombre del modelo debe estar en singular, y con formato CamelCase.<br /><br /><strong>¿Crear dos modelos para dos tablas que se relacionan mediante una id o conector?</strong><br />Fácil: te vas a una de las tablas (la primaria) y agregas un método:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">public function nombre_con_el_que_quieres_identificar_la_segunda_tabla()<br />{<br />&nbsp; &nbsp; return $this-&gt;hasOne(ruta-del-modelo-de-la-segunda-tabla);<br />}</code><br />Por ejemplo, la primera tabla es &quot;users&quot; y la segunda es &quot;user_profiles&quot;:<br />En el modelo <em>User</em>:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">public function profile()<br />{<br />&nbsp; &nbsp; return $this-&gt;hasOne(App\UserProfile);<br />}</code><br />Pero cuidado! Esto es suficiente únicamente si se cumple la siguiente convención: los elementos que se interconectan entre la primera y la segunda tabla son: &quot;id&quot; para el caso de la primera y &quot;nombre-de-la-primera-tabla(singular)_id&quot; para el caso de la segunda tabla.<br /><br />Ahora, ¿¿¿qué más hay que agregar si no se cumple con la convención???<br />Revisar la sección Eloquent, en la documentación oficial de Laravel, porque el marikón pendejo del videotutorial no nos lo quizo decir. Marikón&nbsp; <img src="/assets/smf/smileys/angry.gif" alt="&#58;angry&#58;" title="angry" class="smiley" /> <img src="/assets/smf/smileys/337337.gif" alt="&#58;biting&#58;" title="Biting" class="smiley" /> <img src="/assets/smf/smileys/shitpost.png" alt="&#58;shitpost&#58;" title="Caca" class="smiley" />
