---
thread: "SCM Coding: anotaciones"
id_msg: 4727
date: "2013-02-24 21:40:01"

subject: "Re:Sanny Builder GTA: SA Coding Anotations..."
user: "t0dragonquesa"

modified_time: 2014-04-03 17:08:35
modified_name: "yap320sorgesoureDug"
icon: xx




---
<span style="font-size: 14pt;" class="bbc_size"><strong>Scmpaths y actores que siguen rutas</strong></span><br /><br />Sabemos que hay instrucciones u opcodes con los cuales hacer que un actor se mueva de un punto a otro, e incluso que lo haga de forma inteligente, pero ¿qué sucede cuando eso no nos basta? ¿tenemos que escribir complejas máquinas de estado para hacer que un actor siga una ruta particular que deseamos? ¡No! La solución es tan fácil como escribir unas pocas instrucciones para movimientos bastante personalizados y hasta un cierto punto versátiles.<br /><br />Léase el código estandar:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">0615: define_action_sequences 13@<br />05D6: clear_scmpath<br />05D7: add_point_to_scmpath&nbsp; 2474.4036 -1671.1002 13.3314<br />05D7: add_point_to_scmpath&nbsp; 2482.3828 -1682.174 13.3304<br />05D7: add_point_to_scmpath&nbsp; 2480.8169 -1726.5841 13.5547<br />05D7: add_point_to_scmpath&nbsp; 2522.562 -1725.4154 13.5469&nbsp; <br />05D7: add_point_to_scmpath&nbsp; 2522.7358 -1718.514 13.5312<br />05D7: add_point_to_scmpath&nbsp; 2535.6318 -1706.942 13.4372<br />05D7: add_point_to_scmpath&nbsp; 2528.6187 -1690.41 13.7015<br />05D7: add_point_to_scmpath&nbsp; 2509.6377 -1676.5874 13.5469<br />05D8: AS_assign_scmpath to_actor -1 flags&nbsp; 7&nbsp; 3&nbsp; <br />0616: define_action_sequences_end 13@<br />0618: assign_actor 1@ to_action_sequences 13@<br />061B: remove_references_to_AS_pack 13@</code><br />No son necesarias las instrucciones <em>0615: define_action_sequences 13@</em>, <em>0618: assign_actor 1@ to_action_sequences 13@</em> y <em>061B: remove_references_to_AS_pack 13@</em>, pero supongo que ayudan a reutilizar rutas.<br /><br />Ahora, ¿cómo funciona la instrucción <em><strong>05D8: AS_assign_scmpath to_actor 1@ flags&nbsp; 7&nbsp; 3</strong></em> , el núcleo de toda esta maravisha?<br />Simple:<br />1@ es obviamente el actor al cual queremos asignarle la ruta.<br />flags 7 3: el primer número indica la velocidad y el segundo, la forma como el actor realiza la ruta...<br />&nbsp; &nbsp; &nbsp; &nbsp;primer número - 4: caminata, 6: correr, 7: correr a todo pulmón<br />&nbsp; &nbsp; &nbsp; &nbsp;segundo número - 0: el actor se detiene en el punto final de la ruta<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1: una vez que el actor llega al último punto de la ruta, se devuelve por donde vino, hasta llegar al primer punto<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2: realiza el mismo recorrido que 1, pero lo repite indefinidamente<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3: realiza el mismo recorrifo que 0, pero lo repite (se vá desde el último punto hasta el primero, en círculo)<br /><br /><strong>Importantísimo:</strong> La ruta sólo acepta un máximo de 8 puntos.<br />También se pueden crear Scmpaths en vehículos!<br /><br /><strong>Importantísimo 2:</strong> se descubrieron bugs cuando la ruta no es circular sino una trayectoria cuyo punto inicial y final están bien alejados, y, a su vez, cuando se usa el tipo de movimiento 1 (hacer que el actor se devuelva). Pilas con eso!!
