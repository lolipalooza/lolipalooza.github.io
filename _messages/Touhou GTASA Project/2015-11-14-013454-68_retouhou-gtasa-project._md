---
thread: "Touhou GTASA Project"
id_msg: 5643
date: "2015-11-14 01:34:54"

subject: "Re:Touhou GTASA Project"
user: "yab220sorgesoureDug"

modified_time: 2015-11-14 02:09:43
modified_name: "yap320sorgesoureDug"
icon: xx




---
<strong>Gameplay: Cómo switchear entre tojas?</strong><br /><br />Actualmente, en GTASA versión v0.1.c, tienes dos modos de cambiar entre personajes en el grupo:<br /><ul class="bbc_list"><li>La primera: pulsa y mantén <strong>Y</strong>, y en el menú elijes teléfono, y llamas a la compañera con la que deseas cambiar.</li><li>La segunda: te diriges hacia donde está tu compañera, la apuntas con el botón secundario del mouse y presionas <strong>Y</strong>, y en el menú elijes la opción &quot;cambiar roles&quot;.</li></ul><br />Inspirado en la mecánica del GTAV, he decidido que es simplemente más fácil y mejor hacerlo como lo hacen ellos:<br /><ul class="bbc_list"><li>En el momento que te provoque, presionas un botón particular (en el GTAV es <strong>Alt</strong>, pero aquí en SA, de momento podemos perfectamente establecerlo en <strong>TAB</strong>) y eliges al personaje al que deseas controlar. Recordar que, originalmente en el SA, cuando presionas <strong>TAB</strong> te aparece el recuadro donde ves los stats originales de CJ. Con la modificación seguirás viendo ese recuadro, y además de eso, verás las imágenes de las compañeras a las que deseas cambiar.</li></ul><br /><strong>Detalles acerca del funcionamiento de los grupos que hay que cambiar:</strong><br /><br />Actualmente, el comportamiento de tus compañeras en idle funciona del siguiente modo:<br /><ul class="bbc_list"><li>Cada grupo tiene su hogar por defecto (donde yace una sphere para salvar, una para comer, y una para cambiar de ropa).</li><li>En cada hogar hay 7 coordenadas (puntos x, y, z, y ángulo) donde el código ubica a una toja en modo idle.</li><li>Hay varias coordenadas distribuidas a lo largo de Los Santos (que se deseaba expandir a todo San Andreas) donde el código puede ubicar a una toja de tu equipo.</li><li>Cada 6 horas (o 12, no recuerdo), el código moverá a las tojas de tu equipo de forma aleatoria a través de (o las 7 coordenadas hogareñas, o a través de el resto de las coordenadas de afuera, o de modo mixto (algunas en el hogar y otras afuera) de modo que hay una amplia posibilidad de que tus tojas están todas reunidas en el hogar al menos una vez al día.</li><li>El código crea un ícono en el lugar de la ciudad donde hay una toja, y si te aproximas a ella, el código destruye el ícono y &quot;spawnea&quot; a la toja, y si te alejas, el código desvanece a la toja y re-coloca el ícono.</li></ul><br />Luego de experimentar el GTAV, y basado en las observaciones respecto a como funciona (o como parece funcionar éste), se me ocurre cambiar las cosas al siguiente modo (OJO: no será fácil, pero es lo mejor):<br /><ul class="bbc_list"><li>Ya no son necesarios íconos para identificar la ubicación de las tojas.</li><li>Ahora las tojas de tu grupo se encontrarán las 24 horas del día realizando alguna actividad. Será creada una lista de posibles actividades, que empezará con pocas y simples actividades, y de a poco en poco irá en expansión a medida que desarrollamos.</li><li>El código leerá la lista y asignará a cada toja una de dichas actividades para que las realice.</li><li>Las actividades pueden caer en varias categorías: ocio, trabajo, entretenimiento, descanzo.</li><li>Las actividades de ocio son las actividades por defecto: éstas pueden ser: dar un paseo por las calles, tomar el vehículo personal y dar una vuelta, ir a la playa a nadar. Simplemente deambular.</li><li>La actividad de descanzo implica que la toja está en el hogar, ya sea deambulando sin hacer nada, alimentándose para reponer salud/disminuir hambre, o durmiendo para restorar energía(inicialmente denominado hp).</li><li>Las actividades de entretenimiento involucran ir a un lugar a comprar algo, o a gastar dinero en algo, para disminuir stress.</li><li>Las actividades de trabajo ponen a la toja a generar ingresos cada cierto tiempo.</li><li>Actividades de aumentar stats en general: visitar escuelas para ganar conocimiento, visitar gyms para ganar fuerza/resistencia/etc.</li><li>¿Otras actividades? Plantearlas para el futuro.</li><li>No necesitas &quot;spawnear&quot; a la toja si estás lejos de ella, de hecho, posiblemente casi nunca te toparás a tu compañera en medio de la calle (pero sería buenísimo que ocurriera). Nunca me he topado con uno de mis compañeros en GTAV en medio de la calle, apesar de que me parece que el GTAV funciona de éste modo que estoy relatando.Quizás si me los llegué a topar, pero como andan en vehículos pues ni los reconocí.</li><li>Dispondrás de un menu para organizar a tu equipo. Puedes encomendarles un cronograma de tareas para que tus compañeras generen dinero/construyan stats paralelamente a las actividades que tu realizas con la toja que tienes bajo control.</li><li></li><li></li></ul><br /><strong>Respecto a las actividades</strong><br /><br />Me puse a pensar que, tal vez, para cierto tipo de actividades (que involucren desplazamiento de A a B), si es necesario spawnear a la toja indistintamente de tu lejanía respecto a ella, ya que si no, emular su avance para llegar de A a B va a ser muy dificil o muy artificial y va a ser imposible la posibilidad de que te la topes por la calle, o simple y llanamente, no vas a poder hacer eso que haces en GTAV: switchear entre personaje A y B repetidamente y notar como A sigue por si solo una ruta y B sigue otra.<br /><br />Lo que se puede hacer para resolver el problema es: si una toja necesita moverse de un punto A a un punto B, entonces la spawneas y haces que siga la ruta, aunque el debuggeo de ésto podría ser un desastre, tomando en cuenta que el engine de San Andreas, al ser tan viejito respecto al de V, podría dar muchos problemas para hacer que un ped haga algo tan simple como trasladarse desde A hasta B de forma totalmente autónoma. Si nos las arreglamos para solventar el problema, entonces la cuestión sería que, una vez llegado al destino, borras a la toja y ahí si creamos una simulación simple para que ésta haga lo que tenga que hacer ahí. Si es trabajar, entonces creo un subproceso, y con un timer, hago que cada tantos segundos se le sume una cantidad de dinero al fondo del jugador, o lo mismo si es un stat, y se le reste energía a la que ejecuta la acción, para que si el jugador desea interrumpir la actividad de la compañera autónoma, aparesca en medio de la actividad con los valores a la mitad. Una vez la toja ha terminado la actividad, se vuelve a spawnear para que siga ruta de B hasta A, y una vez llegado a A, entonces de vuelve a eliminar. Suena razonable ¿Eh?<br /><br />El otro problema vendría siendo las actividades de deambulación: aquí el actor no sigue rutas de A a B, simplemente deambula. ¿Es necesario tenerlo spawneado el 100% del tiempo? Y en caso de que no haga falta spawnearlo, ¿cómo saber a dónde generarlo si al jugador se le ocurre switchear a ese actor en un momento random? ¿aleatoriamente? y más aún ¿y que tal si el jugador maliciosamente desea switchear de actor A a actor B repetidamente cuando actor A y actor B deambulan? Es ahí donde se le vería el punto flaco a la estrategia de generar al actor deambulante en una zona random, a menos que el código que lo genera funcione del siguiente modo: generas al actor en sitio A, y hechas a un timer a andar, si pasó suficiente tiempo sin que el jugador cambiara a ese actor, entonces lo mueves de sitio aleatoriamente (siempre y cuando sea dentro de la misma ciudad, no hay problema de en dónde caiga). Si el timer estaba por finalizar pero el jugador cambia al actor deambulante antes que finalize, entonces lo reinicias y lo vuelves a hechar a andar, con eso nos evitamos la posibilidad de que el jugador maliciosamente haga cambios repetidos entre actor A y actor B, y de un instante a otro el actor B aparesca en un punto muy lejano de donde se encontraba hace un momento.<br /><br />Será cuestión de programar y probar si lo que he plasmado aquí realmente funciona o sea necesario planificar otra estrategia.
