---
thread: "Notas sobre Laravel. Pt II"
id_msg: 908474
date: "2019-07-09 16:23:13"

subject: "Re:Notas sobre Laravel. Pt II"
user: "yap320sorgesoureDug"

modified_time: 2019-07-22 16:13:23
modified_name: "yap320sorgesoureDug"
icon: xx



edit_reason: "pos no'más y así :'v"
---
(<a href="http://smf.halabalooza.orgy/index.php/topic,3378.msg908462.html#msg908462" class="bbc_link">Volver al índice</a>)<br /><div align="center"><span style="font-size: 18pt;" class="bbc_size"><span style="font-family: times new roman;" class="bbc_font"><strong>11. <em>Creación y asociación de tablas con el uso de migraciones y claves foráneas</em></strong></span></span><br />(<a href="https://styde.net/crear-y-asociar-tablas-usando-las-migraciones-de-laravel-con-claves-foraneas/" class="bbc_link new_win" target="_blank">https://styde.net/crear-y-asociar-tablas-usando-las-migraciones-de-laravel-con-claves-foraneas/</a>)</div><br />Pendiente: ver video otra vez porque mientras que trataba de reproducir el contenido de esta clase me surgió una duda:<br /><br />A la hora de crear una migración solo para designar una llave foránea, en <em>up</em> pongo lo siguiente:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&nbsp; &nbsp; public function up()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Schema::table(&#039;boards&#039;, function (Blueprint $table) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $table-&gt;foreign(&#039;category_id&#039;)-&gt;references(&#039;id&#039;)-&gt;on(&#039;categories&#039;);<br />&nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; }</code><br />Pero en <em>down</em>, traté de poner ésto:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&nbsp; &nbsp; public function down()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Schema::table(&#039;boards&#039;, function (Blueprint $table) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $table-&gt;dropForeign(&#039;category_id&#039;);<br />&nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; }</code><br />Y me manda error. <em>&#039;category_id&#039; no se reconoce</em>.<br />Y el problema es, al parecer, que <em>dropForeign()</em> no admite de dato el nombre de la columna que quiero establecer como llave foránea, sino más bien su nombre como llave foránea, al cual aparentemente hay que anteponerle &quot;boards_&quot; (nombre de la tabla a la que pertenece), y postponerle &quot;_foreign&quot;, quedándo al final así: <em>&#039;boards_category_id_foreign&#039;</em>.<br /><br />En los apuntes de esta clase no dice nada sobre qué poner en down(), y estoy casi seguro que en el video de la clase si crean esa función, y no recuerdo que me hayan advertido nada sobre eso. Probablemente él usó un método que admite el nombre de la columna directamente.<br /><br />Se puede pasar el nombre de la columna a <em>dropForeign()</em> si se le pasa dentro de un array:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&nbsp; &nbsp; public function down()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; Schema::table(&#039;boards&#039;, function (Blueprint $table) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $table-&gt;dropForeign(&#91;&#039;category_id&#039;]);<br />&nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; }</code><br /><strong><em>UPDATE</em>:</strong> Sip, en la lección se habla de usar el comando <em>dropForeign</em> con el nombre de la columna dentro del array.
