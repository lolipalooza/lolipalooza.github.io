---
thread: "Notas sobre Laravel. Pt II"
id_msg: 908467
date: "2019-07-09 15:57:44"

subject: "Re:Notas sobre Laravel. Pt II"
user: "yap320sorgesoureDug"



icon: xx




---
(<a href="http://smf.halabalooza.orgy/index.php/topic,3378.msg908462.html#msg908462" class="bbc_link">Volver al índice</a>)<br /><div align="center"><span style="font-size: 18pt;" class="bbc_size"><span style="font-family: times new roman;" class="bbc_font"><strong>4. <em>Pruebas</em></strong></span></span><br />(<a href="https://styde.net/pruebas-con-laravel/" class="bbc_link new_win" target="_blank">https://styde.net/pruebas-con-laravel/</a>)</div><br />Esta lección no es más que una introducción a lo que en platzi llaman test unit, solo que enfocado en Laravel.<br /><br />Carpeta en donde van los archivos: tests/Feature, tests/Unit<br />Aunque este capítulo solo habla de tests/Feature<br /><br />Para realizar pruebas desde cónsola:<br /><span style="font-family: courier;" class="bbc_font"><span style="color: teal;" class="bbc_color">&gt; t</span></span>&nbsp; &nbsp; &nbsp; &lt;-- solo si sabes crear atajos<br />ó<br /><span style="font-family: courier;" class="bbc_font"><span style="color: teal;" class="bbc_color">&gt; vendor/bin/phpunit</span></span>&nbsp; &nbsp; &lt;---- esta wea conchetumare es para laravel 5.5<br />ó<br /><span style="font-family: courier;" class="bbc_font"><span style="color: teal;" class="bbc_color">&gt; php vendor/phpunit/phpunit/phpunit</span></span>&nbsp; &nbsp; &nbsp;&lt;---- para laravel 5.2<br />En la consola de windows hay que anteponer el &quot;php&quot;, al parecer, si solo llamas vendor/.... entonces sale mensaje de error de &#039;comando no reconocido&#039;<br /><br />Crear nueva prueba:<br /><span style="font-family: courier;" class="bbc_font"><span style="color: teal;" class="bbc_color">&gt; php artisan make:test UsersModuleTest</span></span><br /><br />Código de ejemplo:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code"><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">Tests</span><span style="color: #007700">\</span><span style="color: #0000BB">Feature</span><span style="color: #007700">;<br /><br />use&nbsp;...<br /><br />class&nbsp;</span><span style="color: #0000BB">UsersModuleTest&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">TestCase<br /></span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;**/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">testExample</span><span style="color: #007700">()</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;El&nbsp;nombre&nbsp;del&nbsp;método&nbsp;no&nbsp;importa&nbsp;y&nbsp;se&nbsp;puede&nbsp;usar&nbsp;literalmente&nbsp;cualquier&nbsp;cosa<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;/usuarios&#039;</span><span style="color: #007700">)</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;consultar&nbsp;ruta&nbsp;&#039;/usuarios&#039;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertStatus</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">)</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;verificar&nbsp;que&nbsp;devuelve&nbsp;respuesta&nbsp;tipo&nbsp;200&nbsp;(y&nbsp;no&nbsp;404,&nbsp;o&nbsp;403,&nbsp;por&nbsp;ejemplo)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertSee</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;Usuarios&#039;</span><span style="color: #007700">);</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;verificar&nbsp;que&nbsp;devuelva&nbsp;específicamente&nbsp;el&nbsp;texto&nbsp;&#039;Usuarios&#039;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;}<br />}<br /></span></span></code><br />Lo anterior reescrito para mejorar legibilidad (segun el autor del video):<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">class UsersModuleTest extends TestCase<br />{<br />&nbsp;&nbsp;&nbsp;/** @test */<br />&nbsp;&nbsp;&nbsp;function it_loads_the_users_list_page()<br />&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;get(&#039;/usuarios&#039;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertStatus(200)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertSee(&#039;Usuarios&#039;);<br />&nbsp;&nbsp;&nbsp;}<br />}<br /></code><br />Tests para otras rutas:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&nbsp;&nbsp;&nbsp;/** @test */<br />&nbsp;&nbsp;&nbsp;function it_loads_the_users_details_page()<br />&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;get(&#039;/usuarios/5&#039;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertStatus(200)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertSee(&#039;Mostrando detalle del usuario: 5&#039;);<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;/** @test */<br />&nbsp;&nbsp;&nbsp;function it_loads_the_new_users_page()<br />&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;get(&#039;/usuarios/nuevo&#039;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertStatus(200)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;assertSee(&#039;Crear nuevo usuario&#039;);<br />&nbsp;&nbsp;&nbsp;}<br /></code><br />Creando nueva prueba para página de saludo:<br />&gt; php artisan make:test WelcomeUsersTest<br /><br />Feature/WelcomeUsersTest:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code"><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">namespace<br /><br />use&nbsp;...<br /><br />class&nbsp;</span><span style="color: #0000BB">WelcomeUsersTest&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">TestCase<br /></span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**&nbsp;@test&nbsp;*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">it_welcomes_users_with_nickname</span><span style="color: #007700">()<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;/saludo/duilio/silence&#039;</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertStatus</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertSee</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;Bienvenido&nbsp;duilio,&nbsp;tu&nbsp;apodo&nbsp;es&nbsp;silence&#039;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**&nbsp;@test&nbsp;*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">it_welcomes_users_without_nickname</span><span style="color: #007700">()<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;/saludo/duilio&#039;</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertStatus</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">assertSee</span><span style="color: #007700">(</span><span style="color: #DD0000">&#039;Bienvenido&nbsp;duilio,&nbsp;no&nbsp;tienes&nbsp;apodo&#039;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;}<br />}<br /></span></span></code>
