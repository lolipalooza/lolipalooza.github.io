---
thread: "Notas sobre Laravel. Pt II"
id_msg: 908499
date: "2019-07-09 16:24:48"

subject: "Re:Notas sobre Laravel. Pt II"
user: "yap320sorgesoureDug"



icon: xx




---
(<a href="http://smf.halabalooza.orgy/index.php/topic,3378.msg908462.html#msg908462" class="bbc_link">Volver al índice</a>)<br /><div align="center"><span style="font-size: 18pt;" class="bbc_size"><span style="font-family: times new roman;" class="bbc_font"><strong>36. <em>Validar que el email sea único</em></strong></span></span><br />(<a href="https://styde.net/validar-que-el-email-sea-unico-cuando-se-edita-un-usuario-con-laravel/" class="bbc_link new_win" target="_blank">https://styde.net/validar-que-el-email-sea-unico-cuando-se-edita-un-usuario-con-laravel/</a>)</div><br /><br />Para escribir reglas de validación que garanticen que uno de los campos (en este caso email) sea único, se escribe en las reglas de validación lo siguiente:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">public function update(User $user)<br />{<br />&nbsp; &nbsp; $data = request()-&gt;validate([<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />&nbsp; &nbsp; &nbsp; &nbsp; &#039;email&#039; =&gt; &#039;unique:users,email&#039;,<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />&nbsp; &nbsp; ]);</code><br />Sin embargo, si quieres editar los datos de tu usuario y quieres ingresar el mismo correo que ya tenías, tendrías que excluir tu propio correo de entre los correos que se va a comprobar.<br />¿Cómo? Así:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&#039;email&#039; =&gt; &#039;unique:users,email,&#039;.$user-&gt;id,</code><br />Desde Laravel 5.3, existe una nueva función para expresar ésto de manera alternativa:<br />Si antes teníamos:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&#039;email&#039; =&gt; &#039;required|email|unique:users,email,&#039;.$user-&gt;id,</code>Ahora sería:<br /><div class="codeheader">Código: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Seleccionar]</a></div><code class="bbc_code">&#039;email&#039; =&gt; &#91;&#039;required&#039;, &#039;email&#039;, Rule::unique(&#039;users&#039;, &#039;email&#039;)-&gt;ignore($user-&gt;id)],</code>
